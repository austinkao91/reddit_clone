<% action = @post.persisted? ? post_url(@post) : posts_url %>
<% method = @post.persisted? ? "PATCH" : "POST" %>
<% submit_text = @post.persisted? ? "Update Post" : "Create New Post" %>



<form action="<%= action %>" method="POST">
  <%= auth_token %>
  <input type="hidden" name="_method" value="<%= method %>"

  <label for="title">Title</label>
    <input type="text" id="title" name="post[title]" value="<%= @post.title %>">
  <br>

  <label for="url">Url</label>
    <input type="text" id="url" name="post[url]" value="<%= @post.url %>">
  <br>

  <label for="Content">
    Content<br>
    <textarea name="post[content]"><%= @post.content %></textarea>
  </label>
  <br>

  <% @subs.each do |sub| %>
    <%= check_box "post", "sub_ids", {:multiple => true}, sub.id, nil %>
    <label><%= sub.title %></label>
  <% end %>
  <br>

  <input type="submit" value="<%= submit_text %>">

</form>
